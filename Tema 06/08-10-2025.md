# Acceso a bases de datos
![dev](https://cdn.7tv.app/emote/01FH918PHG00072TF42DHX4EJY/4x.avif)

En clase vamos a usar [sqlite3](https://sqlite.org/).

Entonces:

```python
import sqlite3

conexion = sqlite3.connect('archivo.db')
cursor = conexion.cursor()
cursor.execute("sql") # 'sql' es cualquier sentencia de SQL; DML, DDL, ...

# Todos estos métodos devuelven la fila que querramos
una_fila = cursor.fetchone()
todas_filas = cursor.fetchall()
filas_paginadas = cursor.fetchmany(cantidad)

# SIEMRPE cerrar el cursor y la conexión
cursor.close()
conexion.close()
```

## Consultas con SQL

```python
documento = int(intput())
nombre = input("...")
apellido = input("...")

sql = "INSERT INTO personas VALUES(" + str("documento") + ",'" +
                                    nombre + "'" + ",'" +
                                    apellido + "'" ...

cursor.execute(sql)
```
Y si el usuario ingrsa:
```bash
> perez') --drop database
```
![CatExplode](https://cdn.7tv.app/emote/01GHA0VYH80002AN42RY901B8W/4x.avif)

> **Conclusión**: nunca concatenar valores en una sentencia SQL.

## ¿Cómo evitar SQL Injection?
`cursor.execute(sql, tupla_valores)`, permite utilizar `?` en su lugar:
```python
cursor.execute(sql, (documento, nombre, apellido))
```
